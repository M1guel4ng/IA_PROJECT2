<!-- index.html (CLARO) -->
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Supermercado Multiagente</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <div class="topbar">
    <div class="brand">
      <div class="logo">ğŸ›’</div>
      <div>
        <div class="title">Supermercado Multiagente</div>
        <div class="subtitle" id="branchSubtitle">Sucursal: â€”</div>
      </div>
    </div>

    <div class="controls">
      <div class="field">
        <label>Backend URL</label>
        <input id="baseUrl" type="text" placeholder="http://localhost:8000" />
      </div>

      <div class="field">
        <label>Vale (Bs)</label>
        <input id="voucher" type="number" value="120" min="0" />
      </div>

      <div class="field">
        <label>Algoritmo</label>
        <select id="algo">
          <option value="astar">A*</option>
          <option value="bfs">BFS</option>
          <option value="dfs">DFS</option>
          <option value="greedy">Greedy</option>
        </select>
      </div>

      <div class="btnrow">
        <button class="btn primary" id="btnReset">Reset</button>
        <button class="btn" id="btnStep">Step</button>
        <button class="btn" id="btnStep10">Step x10</button>
        <button class="btn success" id="btnPlay">Play</button>
        <button class="btn danger" id="btnPause" disabled>Pause</button>
        <button class="btn" id="btnBranch">Sucursales</button>
      </div>

      <div class="field" style="min-width:220px">
        <div class="row" style="gap:8px;align-items:center;justify-content:space-between">
          <label style="margin:0">Velocidad</label>
          <span class="tiny"><span id="speedLabel">200</span> ms</span>
        </div>
        <input id="speed" type="range" min="50" max="1200" step="50" value="200" style="width:100%" />
      </div>
    </div>
  </div>

  <div class="layout">
    <div class="leftPane">

      <div class="tabbar">
        <div class="tabs">
          <button class="tabbtn active" id="tabMapBtn">ğŸ—ºï¸ Mapa</button>
          <button class="tabbtn" id="tabCashierBtn">ğŸ§¾ Caja</button>
        </div>
        <div class="statusPill">
          <span class="dotLive"></span>
          <span id="statusText">â€”</span>
          <span class="pill soft" id="pillCashierStatus">ğŸ§¾ -</span>
          <span class="pill soft" id="pillRegister">ğŸ·ï¸ Caja: -</span>
        </div>
      </div>

      <!-- MAP -->
      <div class="tabView active" id="viewMap">
        <div class="stageCard">
          <div class="stageHead">
            <div>
              <div class="stageTitle">Mapa</div>
              <div class="tiny">Hover sobre el producto para ver detalles</div>
            </div>
            <div class="legend">
              <span class="chip"><span class="dot entrance"></span>Entrada</span>
              <span class="chip"><span class="dot exit"></span>Salida</span>
              <span class="chip"><span class="dot shelf"></span>Estante</span>
              <span class="chip"><span class="dot product"></span>Producto</span>
              <span class="chip"><span class="dot buyer"></span>Comprador</span>
              <span class="chip"><span class="dot cashier"></span>Cajero</span>
              <span class="chip"><span class="dot goal"></span>Objetivo</span>
            </div>
          </div>

          <div class="stageWrap">
            <canvas id="canvas"></canvas>
            <div class="tooltip" id="tooltip"></div>
          </div>
        </div>

        <!-- Compra (claro) -->
        <div class="card innerCard" style="margin-top:12px">
          <div class="cardTitle">ğŸ›’ Compra</div>

          <div class="moneyGrid">
            <div class="moneyBox">
              <div class="moneyLabel">Vale</div>
              <div class="moneyValue" id="buyVoucher">0.00</div>
            </div>
            <div class="moneyBox">
              <div class="moneyLabel">Gastado</div>
              <div class="moneyValue" id="buySpent">0.00</div>
            </div>
            <div class="moneyBox">
              <div class="moneyLabel">Restante</div>
              <div class="moneyValue" id="buyRemain">0.00</div>
            </div>
          </div>

          <div class="progressWrap">
            <div class="progressTop">
              <div class="tiny">Progreso</div>
              <div class="tiny" id="buyProgressText">0% (0.00/0.00)</div>
            </div>
            <div class="progressBar">
              <div class="progressFill" id="buyProgressBar"></div>
            </div>
          </div>

          <div class="tiny" style="margin-top:10px">Ãtems: <b id="buyItems">0</b></div>

          <div class="list fancyList" id="mapCartBox" style="margin-top:10px">â€”</div>
        </div>
      </div>

      <!-- CASHIER -->
      <div class="tabView" id="viewCashier">
        <div class="stageCard">
          <div class="stageHead">
            <div>
              <div class="stageTitle">Caja</div>
              <div class="tiny">Escaneo y pago</div>
            </div>
          </div>

          <div class="stageWrap">
            <div class="checkoutLayout">
              <div class="card innerCard">
                <div class="cardTitle">ğŸ“Œ Estado</div>
                <div class="kv">
                  <div class="k">Estado</div><div class="v" id="stCashierStatus">-</div>
                  <div class="k">Caja</div><div class="v" id="stCashierReg">-</div>
                  <div class="k">Escaneados</div><div class="v" id="stCashierScanned">-</div>
                  <div class="k">Ãšltimo</div><div class="v" id="stCashierLast">-</div>
                </div>
              </div>

              <div class="card innerCard">
                <div class="cardTitle">ğŸ’° Montos</div>
                <div class="kv">
                  <div class="k">Subtotal</div><div class="v" id="stCashierSubtotal">-</div>
                  <div class="k">Canjeado</div><div class="v" id="stCashierRedeemed">-</div>
                  <div class="k">Cambio</div><div class="v" id="stCashierRemaining">-</div>
                </div>

                <div class="progressWrap">
                  <div class="progressTop">
                    <div class="tiny">Progreso caja</div>
                    <div class="tiny" id="stCashierProgressText">-</div>
                  </div>
                  <div class="progressBar">
                    <div class="progressFill" id="cashierProgressBar"></div>
                  </div>
                </div>
              </div>

              <div class="card innerCard checkoutWide">
                <div class="cardTitle">ğŸ§º Carrito</div>
                <div class="list" id="cartList">â€”</div>
              </div>

              <div class="card innerCard checkoutWide">
                <div class="cardTitle">ğŸ§¾ Log de caja</div>
                <div class="list timeline" id="cashierLog">â€”</div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- SIDE -->
    <aside class="side">
      <div class="card">
        <h3>ğŸ“Š Estado comprador</h3>
        <div class="kv">
          <div class="k">Step</div><div class="v" id="stStep">-</div>
          <div class="k">PosiciÃ³n</div><div class="v" id="stBuyerPos">-</div>
          <div class="k">Vale</div><div class="v" id="stVoucher">-</div>
          <div class="k">Restante</div><div class="v" id="stRemaining">-</div>
          <div class="k">Gastado</div><div class="v" id="stSpent">-</div>
          <div class="k">% gastado</div><div class="v" id="stSpentPct">-</div>
          <div class="k">Ãtems</div><div class="v" id="stItems">-</div>
          <div class="k">Pasos</div><div class="v" id="stBuyerSteps">-</div>
          <div class="k">PagÃ³</div><div class="v" id="stPaid">-</div>
          <div class="k">Goal</div><div class="v" id="stGoal">-</div>
          <div class="k">Algoritmo</div><div class="v" id="stAlgo">-</div>
        </div>
      </div>

      <div class="card">
        <h3>ğŸ§  Log</h3>
        <div class="log" id="log">â€”</div>
      </div>

      <div class="hint">
        Tip: si el tooltip no aparece, asegÃºrate de que el canvas estÃ¡ recibiendo mousemove.
      </div>
    </aside>
  </div>

  <script src="app.js"></script>
</body>
</html>
